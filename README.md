# WireGuard Configuration Generator

A simple program for quickly generating configurations for a `wireguard` server and multiple hosts at once. It can also generate a configuration file for `dnsmasq`. The code is currently quite raw. I wrote it quickly. Wrote on mingw-w64 on Windows 10 but should work on Linux too, I don't tested yet.


# Instalation
- `sudo apt install libsodium-dev nlohmann-json3-dev cmake ninja-build`
- `mkdir build`
- `cd build`
- `cmake ..`
- `ninja` / `make`


# Usage

`wgcg input_config.json output_dir/`

- input_config.json - network template
- output_dir/ - the directory where all output files will be saved

# `input_config.json` syntax
- `"dns"` `bool` - should a DNS config be generated?
- `"intranet"` `bool` - can peers communicate with each other? (not yet implemented, does nothing for now)
- `"bind"` `uint16_t` - server listening port.
- `"endpoint"` `host:port` - address that peers will connect to.
- `"network"` `0.0.0.0/0` - virtual network address.
- `"interface"` `string` - network interface name.
- `"peers"` `string[]` - list of peer names.


# Example

Create a file called `input_config.json`:

```json

{

    "dns": true,
    "intranet": true,
    "bind": 42069,
    "endpoint": "my-domain.com:42069",
    "network": "10.0.0.0/24",
    "interface": "wg0",

    "peers": [

        "hello",
        "world"

    ]

}

```

Run the command: `wgcg input_config.json output_dir/`

This will generate the following files:

- `wg0.conf`
```ini
# File generated by WireGuard Config Generator (C) 2025

[Interface]
PrivateKey = ONfbIXke/r7yx6m7bMZfUE+wBF7+n4V+tJ5GGVF8uF4=
Address = 10.0.0.1/24
ListenPort = 42069

# hello
PublicKey = Gpmzdn0uWgJbaTeV5MBsgMMNQUxEjmmsiqHkAkNr6AI=
AllowedIPs = 10.0.0.2/32

# world
PublicKey = FSIACwv9MhJ+fmRTFfUgCwd0XVWIH81CXiX7d5l3p24=
AllowedIPs = 10.0.0.3/32

```

- `wg0-dnsmasq.conf`
```ini

# File generated by WireGuard Config Generator (C) 2025

interface=wg0

address=/hello.vpn/10.0.0.2
address=/world.vpn/10.0.0.3

```

- `hello.conf`
```ini

# File generated by WireGuard Config Generator (C) 2025
# Peer: hello

[Interface]
PrivateKey = UcTYkWiw3rRSUVdpeOg6Wk4GM8QukCiJNk6GeF6j1NY=
Address = 10.0.0.2/24
DNS = 10.0.0.1

[Peer]
PublicKey = zjKa5Mtek0qIMi/c6VlGtfS1FBf+9lrtKPkpx12VcVU=
AllowedIPs = 10.0.0.0/24
Endpoint = my-domain.com:42069
PersistentKeepalive = 25


```

- `world.conf`
```ini

# File generated by WireGuard Config Generator (C) 2025
# Peer: world

[Interface]
PrivateKey = vYqVhqmty5HUs5cDeWF52QwU9+PByfVnaygn6jpdXMc=
Address = 10.0.0.3/24
DNS = 10.0.0.1

[Peer]
PublicKey = zjKa5Mtek0qIMi/c6VlGtfS1FBf+9lrtKPkpx12VcVU=
AllowedIPs = 10.0.0.0/24
Endpoint = my-domain.com:42069
PersistentKeepalive = 25


```


# TODO
- [ ] Document the code
- [ ] Implement peer-to-peer communication support